<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Map Editor</title>
    <style>
        #svg-container {
            border: 1px solid black;
            margin-top: 10px;
            height: 750px;
            overflow: hidden;
            position: relative;
            background: #e7e7e7;
        }
        svg {
            position: absolute;
            top: 0;
            left: 0;
            cursor: grab;
            transition: transform 0.1s;
        }
        .shape {
            cursor: pointer;
        }
        .zoomable {
            cursor: grab;
        }
        .zoomable:active {
            cursor: grabbing;
        }
        .slider-container {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        .slider-label {
            margin-right: 10px;
        }
        .slider {
            -webkit-appearance: none;
            width: 150px;
            height: 15px;
            border-radius: 5px;
            background: #ddd;
            cursor: pointer;
            outline: none;
        }
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #4CAF50;
            cursor: pointer;
        }
        .slider::-moz-range-thumb {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #4CAF50;
            cursor: pointer;
        }
        .mode-indicator {
            margin-left: 10px;
        }
        .color-picker-container {
            margin-top: 10px;
            display: flex;
            align-items: center;
        }
        #color-input {
            position: absolute;
            top: 5px;
            left: 320px;
        }
        #download-button {
            position: absolute;
            top: 13px;
            right: 30px;
            padding: 5px 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 3px;
            cursor: pointer;
        }
        #map-dropdown {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
        }
    </style>
</head>
<body>
    <div class="slider-container">
        <label for="mode-slider" class="slider-label">Mode:</label>
        <input type="range" id="mode-slider" class="slider" min="0" max="1" step="1" value="0">
        <span id="mode-indicator" class="mode-indicator">Color Mode</span>
    </div>
    <select id="map-dropdown">
        <option value="" selected disabled>Select Map</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/AlabamaMunicipalities.svg">Alabama Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/AlaskaMunicipalities.svg">Alaska Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/ArizonaMunicipalities.svg">Arizona Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/ArkansasMunicipalities.svg">Arkansas Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/CaliforniaMunicipalities.svg">California Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/ColoradoMunicipalities.svg">Colorado Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/ConnecticutMunicipalities.svg">Connecticut Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/DelawareMunicipalities.svg">Delaware Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/FloridaMunicipalities.svg">Florida Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/GeorgiaMunicipalities.svg">Georgia Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/HawaiiMunicipalities.svg">Hawaii Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/IdahoMunicipalities.svg">Idaho Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/IllinoisMunicipalities.svg">Illinois Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/IndianaMunicipalities.svg">Indiana Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/IowaMunicipalities.svg">Iowa Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/KansasMunicipalities.svg">Kansas Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/KentuckyMunicipalities.svg">Kentucky Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/LouisianaMunicipalities.svg">Louisiana Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/MaineMunicipalities.svg">Maine Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/MarylandMunicipalities.svg">Maryland Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/MassachusettsMunicipalities.svg">Massachusetts Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/MichiganMunicipalities.svg">Michigan Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/MinnesotaMunicipalities.svg">Minnesota Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/MississippiMunicipalities.svg">Mississippi Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/MissouriMunicipalities.svg">Missouri Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/MontanaMunicipalities.svg">Montana Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/NebraskaMunicipalities.svg">Nebraska Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/NevadaMunicipalities.svg">Nevada Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/NewHampshireMunicipalities.svg">New Hampshire Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/NewJerseyMunicipalities.svg">New Jersey Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/NewMexicoMunicipalities.svg">New Mexico Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/NewYorkMunicipalities.svg">New York Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/NorthCarolinaMunicipalities.svg">North Carolina Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/NorthDakotaMunicipalities.svg">North Dakota Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/OhioMunicipalities.svg">Ohio Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/OklahomaMunicipalities.svg">Oklahoma Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/OregonMunicipalities.svg">Oregon Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/PennsylvaniaMunicipalities.svg">Pennsylvania Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/RhodeIslandMunicipalities.svg">Rhode Island Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/SouthCarolinaMunicipalities.svg">South Carolina Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/SouthDakotaMunicipalities.svg">South Dakota Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/TennesseeMunicipalities.svg">Tennessee Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/TexasMunicipalities.svg">Texas Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/UtahMunicipalities.svg">Utah Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/VermontMunicipalities.svg">Vermont Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/VirginiaMunicipalities.svg">Virginia Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/WashingtonMunicipalities.svg">Washington Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/WestVirginiaMunicipalities.svg">West Virginia Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/WisconsinMunicipalities.svg">Wisconsin Municipalities</option>
        <option value="https://raw.githubusercontent.com/bradinator33/bradinator33.github.io/d96f1698c739ae863fb801b41438b5c0b91814c5/maps/WyomingMunicipalities.svg">Wyoming Municipalities</option>
    </select>
    <button id="download-button">Download SVG</button>
    <div id="svg-container"></div>
    <input type="color" id="color-input" value="#ff0000">
    <script>
        const svgContainer = document.getElementById('svg-container');
        const colorInput = document.getElementById('color-input');
        const downloadButton = document.getElementById('download-button');
        const modeSlider = document.getElementById('mode-slider');
        const modeIndicator = document.getElementById('mode-indicator');
        const mapDropdown = document.getElementById('map-dropdown');
        let currentMode = 'Color';
        let currentColor = colorInput.value;
        let originalColors = new Map();
        let svgElement;

        modeSlider.addEventListener('input', () => {
            currentMode = modeSlider.value == 0 ? 'Color' : 'Zoom';
            modeIndicator.textContent = currentMode + ' Mode';
        });

        colorInput.addEventListener('input', (event) => {
            currentColor = event.target.value;
        });

        mapDropdown.addEventListener('change', (event) => {
            const url = event.target.value;
            if (url) {
                fetch(url)
                    .then(response => response.text())
                    .then(data => {
                        svgContainer.innerHTML = data;
                        svgElement = svgContainer.querySelector('svg');
                        if (svgElement) {
                            svgElement.classList.add('zoomable');
                            addSvgEventListeners();
                        }
                    });
            }
        });

        downloadButton.addEventListener('click', () => {
            if (svgElement) {
                const serializer = new XMLSerializer();
                const svgData = serializer.serializeToString(svgElement);
                const blob = new Blob([svgData], { type: 'image/svg+xml' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'map.svg';
                a.click();
                URL.revokeObjectURL(url);
            }
        });

        function addSvgEventListeners() {
            svgElement.querySelectorAll('.shape').forEach(shape => {
                shape.addEventListener('click', handleShapeClick);
                shape.addEventListener('contextmenu', handleShapeRightClick);
            });

            svgElement.addEventListener('mousedown', handleMouseDown);
            svgElement.addEventListener('mouseup', handleMouseUp);
            svgElement.addEventListener('mousemove', handleMouseMove);
        }

        function handleShapeClick(event) {
            if (currentMode === 'Color') {
                const shape = event.target;
                const originalColor = shape.getAttribute('fill');
                if (!originalColors.has(shape)) {
                    originalColors.set(shape, originalColor);
                }
                shape.setAttribute('fill', currentColor);
            }
        }

        function handleShapeRightClick(event) {
            event.preventDefault();
            if (currentMode === 'Color') {
                const shape = event.target;
                if (originalColors.has(shape)) {
                    shape.setAttribute('fill', originalColors.get(shape));
                    originalColors.delete(shape);
                }
            }
        }

        let isDragging = false;
        let startX, startY;

        function handleMouseDown(event) {
            if (currentMode === 'Zoom' && event.which === 1) {
                isDragging = true;
                startX = event.clientX;
                startY = event.clientY;
            }
        }

        function handleMouseUp(event) {
            if (currentMode === 'Zoom') {
                isDragging = false;
            }
        }

        function handleMouseMove(event) {
            if (currentMode === 'Zoom' && isDragging) {
                const dx = event.clientX - startX;
                const dy = event.clientY - startY;
                svgElement.style.transform = `translate(${dx}px, ${dy}px)`;
                startX = event.clientX;
                startY = event.clientY;
            }
        }
    </script>
</body>
</html>
